---
description: Vector v0.4.0 release notes: 9 new features, 43 enhancements, 12 bug fixes.
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     scripts/generate/templates/docs/resources/release-notes/by-version/0.4.0.md.erb
-->

# v0.4.0 release notes

<p align="center">
  <strong>
    Get notified of releases → <a href="https://github.com/timberio/vector/watchers">watch the Vector repo</a> or <a href="https://vector.dev/mailing_list/">join our mailing list</a>.
  </strong>
</p>

---

![Vector v0.4.0 release][images.v0.4.0]

---

* [**Changes**](#changes) - [+22870 -7246](https://github.com/timberio/vector/compare/v0.3.0...v0.4.0)
    * [**9 new features**](#new-features) - [3 transform](#new-transforms), [3 sink](#new-sinks), [3 source](#new-sources), 
    * [**43 enhancements**](#enhancements) - [6 source](#source-enhancements), [17 sink](#sink-enhancements), [7 transform](#transform-enhancements), [13 core](#core-enhancements), 
    * [**1 performance improvement**](#performance-improvements) - [1 core](#core-performance-improvements), 
    * [**12 bug fixes**](#bug-fixes) - [4 sink](#sink-bug-fixes), [8 core](#core-bug-fixes), 
* [**Contributors**](#contributors)
* [**Updating**](#updating) - [download][url.v0-4-0]
* [**Community**][url.community] - [chat/forum][url.vector_chat], [mailing list][url.mailing_list]
* [**Roadmap**][url.roadmap] - [vote on new features][url.vote_feature]

---

## Changes

### New features

#### New sinks

* *new*: [`aws_cloudwatch_metrics` sink][docs.aws_cloudwatch_metrics_sink] ([#707][url.pr_707])
* *new*: [`clickhouse` sink][docs.clickhouse_sink] ([#693][url.pr_693])
* *new*: [`file` sink][docs.file_sink] ([#688][url.pr_688])
#### New sources

* *new*: [`udp` source][docs.udp_source] ([#738][url.pr_738])
* *new*: [`kafka` source][docs.kafka_source] ([#774][url.pr_774])
* *new*: [`journald` source][docs.journald_source] ([#702][url.pr_702])
#### New transforms

* *new*: [`coercer` transform][docs.coercer_transform] ([#666][url.pr_666])
* *new*: [`remove_tags` transform][docs.remove_tags_transform] ([#785][url.pr_785])
* *new*: [`add_tags` transform][docs.add_tags_transform] ([#785][url.pr_785])

### Enhancements

#### Core enhancements

* *cli*: Add `--color` option and tty check for ansi colors ([#623][url.pr_623])
* *[config][docs.configuration]*: Improve configuration validation and make it more strict ([#552][url.pr_552])
* *[config][docs.configuration]*: Reusable templating system for event values ([#656][url.pr_656])
* *[config][docs.configuration]*: Validation of sinks and sources for non-emptiness. ([#739][url.pr_739])
* *[metric data model][docs.metric]*: Use floats for metrics values ([#553][url.pr_553])
* *[metric data model][docs.metric]*: Add timestamps into metrics ([#726][url.pr_726])
* *[metric data model][docs.metric]*: Add tags into metrics model ([#754][url.pr_754])
* *[observability][docs.monitoring]*: Initial rate limit subscriber ([#494][url.pr_494])
* *[observability][docs.monitoring]*: Add rate limit notice when it starts ([#696][url.pr_696])
* *operations*: Add `jemallocator` feature flag ([#653][url.pr_653])
* *operations*: Build for x86_64-unknown-linux-musl with all features and optimized binary size ([#689][url.pr_689])
* *topology*: Adjust transform trait for multiple output events ([fe7f2b5][url.commit_fe7f2b503443199a65a79dad129ed89ace3e287a])
* *topology*: Add sink healthcheck disable ([#731][url.pr_731])
#### Sink enhancements

* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add cloudwatch partitioning and refactor partition buffer ([#519][url.pr_519])
* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add retry ability to cloudwatch ([#663][url.pr_663])
* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: Add dynamic group creation ([#759][url.pr_759])
* *[`aws_kinesis_streams` sink][docs.aws_kinesis_streams_sink]*: Add configurable partition keys ([#692][url.pr_692])
* *[`aws_s3` sink][docs.aws_s3_sink]*: Add filename extension option and fix trailing slash ([#596][url.pr_596])
* *[`console` sink][docs.console_sink]*: Accept both logs and metrics ([#631][url.pr_631])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Default `doc_type` to `_doc` and make it op… ([#695][url.pr_695])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Use templates for es index and s3 key prefix ([#686][url.pr_686])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add http basic authorization ([#749][url.pr_749])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add support for additional headers to the elasticsearch sink ([#758][url.pr_758])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Add support for custom query parameters ([#766][url.pr_766])
* *[`http` sink][docs.http_sink]*: Add support for unverified https ([#815][url.pr_815])
* *[`prometheus` sink][docs.prometheus_sink]*: Support histograms ([#675][url.pr_675])
* *[`prometheus` sink][docs.prometheus_sink]*: Support sets ([#733][url.pr_733])
* *[`prometheus` sink][docs.prometheus_sink]*: Add labels support ([#773][url.pr_773])
* *[`prometheus` sink][docs.prometheus_sink]*: Add namespace config ([#782][url.pr_782])
* *[`tcp` sink][docs.tcp_sink]*: Add support for tls ([#765][url.pr_765])
#### Source enhancements

* *[`file` source][docs.file_source]*: Add file checkpoint feature. ([#609][url.pr_609])
* *[`file` source][docs.file_source]*: Fall back to global data_dir option (#644) ([#673][url.pr_673])
* *[`file` source][docs.file_source]*: Make fingerprinting strategy configurable ([#780][url.pr_780])
* *[`file` source][docs.file_source]*: Allow aggregating multiple lines into one event ([#809][url.pr_809])
* *[`file` source][docs.file_source]*: Favor older files and allow configuring greedier reads ([#810][url.pr_810])
* *[`journald` source][docs.journald_source]*: Add checkpointing support ([#816][url.pr_816])
#### Transform enhancements

* *[`grok_parser` transform][docs.grok_parser_transform]*: Add type coercion ([#632][url.pr_632])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Output multiple metrics from a single log ([d8eadb0][url.commit_d8eadb08f469e7e411138ed9ff9e318bd4f9954c])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Push histogram and set metrics from logs ([#650][url.pr_650])
* *[`log_to_metric` transform][docs.log_to_metric_transform]*: Use templates for metric names in log_to_metric ([#668][url.pr_668])
* *[`lua` transform][docs.lua_transform]*: Add tags support to log_to_metric transform ([#786][url.pr_786])
* *[`regex_parser` transform][docs.regex_parser_transform]*: Log when regex does not match (#618 ([0098034][url.commit_009803467f4513827abbe4a28d8170a5593ea2c5])
* *[`tokenizer` transform][docs.tokenizer_transform]*: Convert "-" into "nil" ([#580][url.pr_580])

### Performance improvements

#### Core performance improvements

* *[observability][docs.monitoring]*: Add initial rework of rate limited logs ([#778][url.pr_778])

### Bug fixes

#### Core bug fixes

* *[config][docs.configuration]*: Reload with unparseable config ([#752][url.pr_752])
* *[log data model][docs.log]*: Unflatten event before outputting ([#678][url.pr_678])
* *[log data model][docs.log]*: Don't serialize mapvalue::null as a string ([#725][url.pr_725])
* *networking*: Retry requests on timeouts ([#691][url.pr_691])
* *operations*: Use gnu ld instead of llvm lld for x86_64-unknown-linux-musl ([#794][url.pr_794])
* *operations*: Fix docker nightly builds ([#830][url.pr_830])
* *security*: Rustsec-2019-0011 by updating crossbeam-epoch ([#723][url.pr_723])
* *topology*: It is now possible to reload a with a non-overlap… ([#681][url.pr_681])
#### Sink bug fixes

* *[`aws_cloudwatch_logs` sink][docs.aws_cloudwatch_logs_sink]*: `encoding = "text"` overrides ([#803][url.pr_803])
* *[`aws_s3` sink][docs.aws_s3_sink]*: Retry httpdispatch errors for s3 and kinesis ([#651][url.pr_651])
* *[`elasticsearch` sink][docs.elasticsearch_sink]*: Make the headers and query tables optional. ([#831][url.pr_831])
* *[`prometheus` sink][docs.prometheus_sink]*: Update metric::set usage ([#756][url.pr_756])


## Contributors

Thank you to all of our contributors:

* Alexander Rodin
* Alexey Suslov
* Andy Georges
* Ayhan
* Ben Johnson
* Binary Logic
* Bittrance
* Brian Kabiro
* Bruce Guenter
* Cédric Da Fonseca
* Denis Andrejew
* Jesse Szwedko
* Kirill Taran
* Lucio Franco
* Luke Steensen
* Markus Holtermann
* Matthias Endler
* apjones-proton
* ktff

## Updating

This release does not require a special upgrade process, please update by following the [standard updating process for your platform][docs.updating].

---

<p align="center">
  Developed with ❤️ by <strong><a href="https://timber.io">Timber.io</a></strong>
</p>


[docs.add_tags_transform]: ../../../usage/configuration/transforms/add_tags.md
[docs.aws_cloudwatch_logs_sink]: ../../../usage/configuration/sinks/aws_cloudwatch_logs.md
[docs.aws_cloudwatch_metrics_sink]: ../../../usage/configuration/sinks/aws_cloudwatch_metrics.md
[docs.aws_kinesis_streams_sink]: ../../../usage/configuration/sinks/aws_kinesis_streams.md
[docs.aws_s3_sink]: ../../../usage/configuration/sinks/aws_s3.md
[docs.clickhouse_sink]: ../../../usage/configuration/sinks/clickhouse.md
[docs.coercer_transform]: ../../../usage/configuration/transforms/coercer.md
[docs.configuration]: ../../../usage/configuration/README.md
[docs.console_sink]: ../../../usage/configuration/sinks/console.md
[docs.elasticsearch_sink]: ../../../usage/configuration/sinks/elasticsearch.md
[docs.file_sink]: ../../../usage/configuration/sinks/file.md
[docs.file_source]: ../../../usage/configuration/sources/file.md
[docs.grok_parser_transform]: ../../../usage/configuration/transforms/grok_parser.md
[docs.http_sink]: ../../../usage/configuration/sinks/http.md
[docs.journald_source]: ../../../usage/configuration/sources/journald.md
[docs.kafka_source]: ../../../usage/configuration/sources/kafka.md
[docs.log]: ../../../about/data-model/log.md
[docs.log_to_metric_transform]: ../../../usage/configuration/transforms/log_to_metric.md
[docs.lua_transform]: ../../../usage/configuration/transforms/lua.md
[docs.metric]: ../../../about/data-model/metric.md
[docs.monitoring]: ../../../usage/administration/monitoring.md
[docs.prometheus_sink]: ../../../usage/configuration/sinks/prometheus.md
[docs.regex_parser_transform]: ../../../usage/configuration/transforms/regex_parser.md
[docs.remove_tags_transform]: ../../../usage/configuration/transforms/remove_tags.md
[docs.tcp_sink]: ../../../usage/configuration/sinks/tcp.md
[docs.tokenizer_transform]: ../../../usage/configuration/transforms/tokenizer.md
[docs.udp_source]: ../../../usage/configuration/sources/udp.md
[docs.updating]: ../../../usage/administration/updating/README.md
[images.v0.4.0]: ../../../assets/v0.4.0.svg#4
[url.commit_009803467f4513827abbe4a28d8170a5593ea2c5]: https://github.com/timberio/vector/commit/009803467f4513827abbe4a28d8170a5593ea2c5
[url.commit_d8eadb08f469e7e411138ed9ff9e318bd4f9954c]: https://github.com/timberio/vector/commit/d8eadb08f469e7e411138ed9ff9e318bd4f9954c
[url.commit_fe7f2b503443199a65a79dad129ed89ace3e287a]: https://github.com/timberio/vector/commit/fe7f2b503443199a65a79dad129ed89ace3e287a
[url.community]: https://vector.dev/community
[url.mailing_list]: https://vector.dev/mailing_list/
[url.pr_494]: https://github.com/timberio/vector/pull/494
[url.pr_519]: https://github.com/timberio/vector/pull/519
[url.pr_552]: https://github.com/timberio/vector/pull/552
[url.pr_553]: https://github.com/timberio/vector/pull/553
[url.pr_580]: https://github.com/timberio/vector/pull/580
[url.pr_596]: https://github.com/timberio/vector/pull/596
[url.pr_609]: https://github.com/timberio/vector/pull/609
[url.pr_623]: https://github.com/timberio/vector/pull/623
[url.pr_631]: https://github.com/timberio/vector/pull/631
[url.pr_632]: https://github.com/timberio/vector/pull/632
[url.pr_650]: https://github.com/timberio/vector/pull/650
[url.pr_651]: https://github.com/timberio/vector/pull/651
[url.pr_653]: https://github.com/timberio/vector/pull/653
[url.pr_656]: https://github.com/timberio/vector/pull/656
[url.pr_663]: https://github.com/timberio/vector/pull/663
[url.pr_666]: https://github.com/timberio/vector/pull/666
[url.pr_668]: https://github.com/timberio/vector/pull/668
[url.pr_673]: https://github.com/timberio/vector/pull/673
[url.pr_675]: https://github.com/timberio/vector/pull/675
[url.pr_678]: https://github.com/timberio/vector/pull/678
[url.pr_681]: https://github.com/timberio/vector/pull/681
[url.pr_686]: https://github.com/timberio/vector/pull/686
[url.pr_688]: https://github.com/timberio/vector/pull/688
[url.pr_689]: https://github.com/timberio/vector/pull/689
[url.pr_691]: https://github.com/timberio/vector/pull/691
[url.pr_692]: https://github.com/timberio/vector/pull/692
[url.pr_693]: https://github.com/timberio/vector/pull/693
[url.pr_695]: https://github.com/timberio/vector/pull/695
[url.pr_696]: https://github.com/timberio/vector/pull/696
[url.pr_702]: https://github.com/timberio/vector/pull/702
[url.pr_707]: https://github.com/timberio/vector/pull/707
[url.pr_723]: https://github.com/timberio/vector/pull/723
[url.pr_725]: https://github.com/timberio/vector/pull/725
[url.pr_726]: https://github.com/timberio/vector/pull/726
[url.pr_731]: https://github.com/timberio/vector/pull/731
[url.pr_733]: https://github.com/timberio/vector/pull/733
[url.pr_738]: https://github.com/timberio/vector/pull/738
[url.pr_739]: https://github.com/timberio/vector/pull/739
[url.pr_749]: https://github.com/timberio/vector/pull/749
[url.pr_752]: https://github.com/timberio/vector/pull/752
[url.pr_754]: https://github.com/timberio/vector/pull/754
[url.pr_756]: https://github.com/timberio/vector/pull/756
[url.pr_758]: https://github.com/timberio/vector/pull/758
[url.pr_759]: https://github.com/timberio/vector/pull/759
[url.pr_765]: https://github.com/timberio/vector/pull/765
[url.pr_766]: https://github.com/timberio/vector/pull/766
[url.pr_773]: https://github.com/timberio/vector/pull/773
[url.pr_774]: https://github.com/timberio/vector/pull/774
[url.pr_778]: https://github.com/timberio/vector/pull/778
[url.pr_780]: https://github.com/timberio/vector/pull/780
[url.pr_782]: https://github.com/timberio/vector/pull/782
[url.pr_785]: https://github.com/timberio/vector/pull/785
[url.pr_786]: https://github.com/timberio/vector/pull/786
[url.pr_794]: https://github.com/timberio/vector/pull/794
[url.pr_803]: https://github.com/timberio/vector/pull/803
[url.pr_809]: https://github.com/timberio/vector/pull/809
[url.pr_810]: https://github.com/timberio/vector/pull/810
[url.pr_815]: https://github.com/timberio/vector/pull/815
[url.pr_816]: https://github.com/timberio/vector/pull/816
[url.pr_830]: https://github.com/timberio/vector/pull/830
[url.pr_831]: https://github.com/timberio/vector/pull/831
[url.roadmap]: https://github.com/timberio/vector/milestones?direction=asc&sort=due_date&state=open
[url.v0-4-0]: https://github.com/timberio/vector/releases/tag/0.4.0
[url.vector_chat]: https://chat.vector.dev
[url.vote_feature]: https://github.com/timberio/vector/issues?q=is%3Aissue+is%3Aopen+sort%3Areactions-%2B1-desc+label%3A%22Type%3A+New+Feature%22
